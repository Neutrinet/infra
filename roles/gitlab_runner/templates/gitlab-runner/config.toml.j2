{{ ansible_managed | comment }}

concurrent = 2
check_interval = 0
# Prometheus metrics
listen_address = "localhost:9252"

[session_server]
  session_timeout = 1800

{% if gitlab_runner_token %}
[[runners]]
  name = "{{ inventory_hostname }}"
  url = "{{ gitlab_runner_api_url }}"
  token = "{{ gitlab_runner_token }}"
  executor = "docker"
  [runners.cache]
    [runners.cache.s3]
  [runners.docker]
    tls_verify = false
    image = "alpine:latest"
    privileged = false
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = ["/cache"]
    shm_size = 0
    pull_policy = "if-not-present"
    output_limit = 32768
{% endif %}
