---
- name: Création de l'utilisateur
  ansible.builtin.import_tasks: user.yml
  tags: ['user']

- name: Configuration de la base de données PostgreSQL
  ansible.builtin.import_role:
    name: postgres_db
  vars:
    postgresql_db_name: "{{ mattermost_owner }}"
    postgresql_db_password: "{{ mattermost_postgresql_password }}"
  tags: ['postgres']

- name: Installation de Mattermost
  ansible.builtin.import_tasks: mattermost.yml
  tags: ['mattermost']

- name: Installation de Matterbridge
  ansible.builtin.import_tasks: matterbridge.yml
  tags: ['matterbridge']
