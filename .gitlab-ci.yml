workflow:
  rules:
    - if: $CI_MERGE_REQUEST_IID
    - if: $CI_COMMIT_TAG
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH

variables:
  PRE_COMMIT_HOME: "${CI_PROJECT_DIR}/.cache/pre-commit"

stages:
  - quality

linting:
  image: neutrinet/pre-commit:1.0.1
  stage: quality
  script:
    - pre-commit run --all-files
  cache:
    key:
      files:
        - .pre-commit-config.yaml
    paths:
      - ${PRE_COMMIT_HOME}
    policy: pull-push
  interruptible: true
