letsencrypt_domains_gandi:
  - neutrinet.be
  - labriqueinter.net
  - internetcu.be

haproxy:
  - hostname: neutrinet.be
    target:
      - grav.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: mediawiki.neutrinet.be
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: wikijs.neutrinet.be
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: realms-wiki.neutrinet.be
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: chat.neutrinet.be
    target:
      - mattermost.patata.louise.neutri.net
    target_port: 8065
    healthcheck: true
    healthcheck_url: GET /api/v4/system/ping

  - hostname: cube.neutrinet.be
    target:
      - backoffice.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck
    timeout: 2m

  - hostname: ffdnapi.neutrinet.be
    target:
      - backoffice.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: files.neutrinet.be
    target:
      - nextcloud.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: user.neutrinet.be
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: wiki.neutrinet.be
    target:
      - dokuwiki.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: meta.neutrinet.be
    target:
      - meta.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: HEAD /

  - hostname: s3.neutrinet.be
    target:
      - ceph-s3-01.patata.louise.neutri.net
      - ceph-s3-02.patata.louise.neutri.net
      - ceph-s3-03.patata.louise.neutri.net
    target_port: 7480
    healthcheck: true
    healthcheck_url: HEAD /

  - hostname: librenms.neutrinet.be
    target:
      - librenms.patata.louise.neutri.net
    target_port: 80
    healthcheck: false

  - hostname: doc.neutrinet.be
    target:
      - hedgedoc.patata.louise.neutri.net
    target_port: 3000
    deny_paths:
      - /metrics
    healthcheck: true
    healthcheck_url: "HEAD /status"

  - hostname: wiki.labriqueinter.net
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: labriqueinter.net
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: internetcu.be
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: cfacile.labriqueinter.net
    target:
      - web-static.patata.louise.neutri.net
    target_port: 80
    healthcheck: true
    healthcheck_url: GET /healthcheck

  - hostname: sync.labriqueinter.net
    target:
      - web-static.patata.louise.neutri.net
    target_port: 9000
    healthcheck: true
    healthcheck_url: GET /hooks/health

haproxy_redirect:
  - from: www.neutrinet.be
    to: neutrinet.be
  - from: beta-wiki.neutrinet.be
    to: wiki.neutrinet.be
  - from: wiki-old.neutrinet.be
    to: mediawiki.neutrinet.be
  - from: admin.neutrinet.be
    to: cube.neutrinet.be
  - from: vpn.neutrinet.be
    to: api.neutrinet.be
  - from: wiki.internetcu.be
    to: wiki.labriqueinter.net
  - from: www.labriqueinter.net
    to: labriqueinter.net
  - from: www.internetcu.be
    to: internetcu.be

haproxy_postgresql:
  - pgsql-01.patata.louise.neutri.net
  - pgsql-02.patata.louise.neutri.net
  - pgsql-03.patata.louise.neutri.net

haproxy_listen:
  - "127.0.0.1"
  - "10.0.11.10"
  - "[::1]"
  - "[2001:913:1000:11::10]"
